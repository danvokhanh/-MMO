{"version":3,"file":"get-video-id.js","sources":["../src/youtube.js","../src/vimeo.js","../src/vine.js","../src/videopress.js","../src/microsoftstream.js","../src/tiktok.js","../src/dailymotion.js","../src/utils/get-src.js","../src/utils/sanitize-url.js","../src/utils/extract-google-redirection-url.js","../src/index.js"],"sourcesContent":["/**\n * Strip away any remaining parameters following `?` or `/` or '&' for YouTube shortcode strings.\n *\n * @note this function is not meant to work with url strings containing a protocol like https://\n * @param {String} shortcodeString - the parameter string\n * @returns {String}\n */\nfunction stripParameters(shortcodeString) {\n\t// Split parameters or split folder separator\n\tif (shortcodeString.includes('?')) {\n\t\tshortcodeString = shortcodeString.split('?')[0];\n\t}\n\n\tif (shortcodeString.includes('/')) {\n\t\tshortcodeString = shortcodeString.split('/')[0];\n\t}\n\n\tif (shortcodeString.includes('&')) {\n\t\tshortcodeString = shortcodeString.split('&')[0];\n\t}\n\n\treturn shortcodeString;\n}\n\n/**\n * Get the Youtube Video id.\n * @param {string} youtubeStr - the url from which you want to extract the id\n * @returns {string|undefined}\n */\nexport default function youtube(youtubeString) {\n\tlet string_ = youtubeString;\n\n\t// Remove the '-nocookie' flag from youtube urls\n\tstring_ = string_.replace('-nocookie', '');\n\n\t// Remove time hash at the end of the string\n\tstring_ = string_.replace(/#t=.*$/, '');\n\n\t// Strip the leading protocol\n\tstring_ = string_.replace(/^https?:\\/\\//, '');\n\n\t// Shortcode\n\tconst shortcode = /youtube:\\/\\/|youtu\\.be\\/|y2u\\.be\\//g;\n\n\tif (shortcode.test(string_)) {\n\t\tconst shortcodeid = string_.split(shortcode)[1];\n\t\treturn stripParameters(shortcodeid);\n\t}\n\n\t// Shorts\n\tconst shortsUrl = /\\/shorts\\//g;\n\tif (shortsUrl.test(string_)) {\n\t\treturn stripParameters(string_.split(shortsUrl)[1]);\n\t}\n\n\t// V= or vi=\n\tconst parameterv = /v=|vi=/g;\n\n\tif (parameterv.test(string_)) {\n\t\tconst array = string_.split(parameterv);\n\t\treturn stripParameters(array[1].split('&')[0]);\n\t}\n\n\t// /v/ or /vi/ or /watch/\n\tconst inlinev = /\\/v\\/|\\/vi\\/|\\/watch\\//g;\n\n\tif (inlinev.test(string_)) {\n\t\tconst inlineid = string_.split(inlinev)[1];\n\t\treturn stripParameters(inlineid);\n\t}\n\n\t// Format an_webp\n\tconst parameterwebp = /\\/an_webp\\//g;\n\n\tif (parameterwebp.test(string_)) {\n\t\tconst webp = string_.split(parameterwebp)[1];\n\t\treturn stripParameters(webp);\n\t}\n\n\t// /e/\n\tconst eformat = /\\/e\\//g;\n\n\tif (eformat.test(string_)) {\n\t\tconst estring = string_.split(eformat)[1];\n\t\treturn stripParameters(estring);\n\t}\n\n\t// Embed\n\tconst embedreg = /\\/embed\\//g;\n\n\tif (embedreg.test(string_)) {\n\t\tconst embedid = string_.split(embedreg)[1];\n\t\treturn stripParameters(embedid);\n\t}\n\n\t// ignore /user/username pattern\n\tconst usernamereg = /\\/user\\/([a-zA-Z\\d]*)$/g;\n\n\tif (usernamereg.test(string_)) {\n\t\treturn undefined;\n\t}\n\n\t// User\n\tconst userreg = /\\/user\\/(?!.*videos)/g;\n\n\tif (userreg.test(string_)) {\n\t\tconst elements = string_.split('/');\n\t\treturn stripParameters(elements.pop());\n\t}\n\n\t// Attribution_link\n\tconst attrreg = /\\/attribution_link\\?.*v%3D([^%&]*)(%26|&|$)/;\n\n\tif (attrreg.test(string_)) {\n\t\treturn stripParameters(string_.match(attrreg)[1]);\n\t}\n\n\t// Live\n\tconst livereg = /\\/live\\//g;\n\n\tif (livereg.test(string_)) {\n\t\tconst liveid = string_.split(livereg)[1];\n\t\treturn stripParameters(liveid);\n\t}\n\n\treturn undefined;\n}\n","/**\n * Get the vimeo id.\n *\n * @param {String} vimeoString the url from which you want to extract the id\n * @returns {String|undefined}\n */\nexport default function vimeo(vimeoString) {\n\tlet string_ = vimeoString;\n\n\tif (string_.includes('#')) {\n\t\t[string_] = string_.split('#');\n\t}\n\n\tif (string_.includes('?') && !string_.includes('clip_id=')) {\n\t\t[string_] = string_.split('?');\n\t}\n\n\tlet id;\n\tlet array;\n\n\tconst event = /https?:\\/\\/vimeo\\.com\\/event\\/(\\d+)$/;\n\n\tconst eventMatches = event.exec(string_);\n\n\tif (eventMatches && eventMatches[1]) {\n\t\treturn eventMatches[1];\n\t}\n\n\tconst primary = /https?:\\/\\/vimeo\\.com\\/(\\d+)/;\n\n\tconst matches = primary.exec(string_);\n\tif (matches && matches[1]) {\n\t\treturn matches[1];\n\t}\n\n\tconst vimeoPipe = [\n\t\t'https?://player.vimeo.com/video/[0-9]+$',\n\t\t'https?://vimeo.com/channels',\n\t\t'groups',\n\t\t'album',\n\t].join('|');\n\n\tconst vimeoRegex = new RegExp(vimeoPipe, 'gim');\n\n\tif (vimeoRegex.test(string_)) {\n\t\tarray = string_.split('/');\n\t\tif (array && array.length > 0) {\n\t\t\tid = array.pop();\n\t\t}\n\t} else if (/clip_id=/gim.test(string_)) {\n\t\tarray = string_.split('clip_id=');\n\t\tif (array && array.length > 0) {\n\t\t\t[id] = array[1].split('&');\n\t\t}\n\t}\n\n\treturn id;\n}\n","/**\n * Get the vine id.\n * @param {string} string_ - the url from which you want to extract the id\n * @returns {string|undefined}\n */\nexport default function vine(string_) {\n\tconst regex = /https:\\/\\/vine\\.co\\/v\\/([a-zA-Z\\d]*)\\/?/;\n\tconst matches = regex.exec(string_);\n\n\tif (matches && matches.length > 1) {\n\t\treturn matches[1];\n\t}\n\n\treturn undefined;\n}\n","/**\n * Get the VideoPress id.\n * @param {string} urlString - the url from which you want to extract the id\n * @returns {string|undefined}\n */\nexport default function videopress(urlString) {\n\tlet idRegex;\n\n\tif (urlString.includes('embed')) {\n\t\tidRegex = /embed\\/(\\w{8})/;\n\t\treturn urlString.match(idRegex)[1];\n\t}\n\n\tidRegex = /\\/v\\/(\\w{8})/;\n\n\tconst matches = urlString.match(idRegex);\n\n\tif (matches && matches.length > 0) {\n\t\treturn matches[1];\n\t}\n\n\treturn undefined;\n}\n","/**\n * Get the Microsoft Stream id.\n * @param {string} urlString - the url from which you want to extract the id\n * @returns {string|undefined}\n */\nexport default function microsoftStream(urlString) {\n\tconst regex = (urlString.includes('embed'))\n\t\t? /https:\\/\\/web\\.microsoftstream\\.com\\/embed\\/video\\/([a-zA-Z\\d-]*)\\/?/\n\t\t: /https:\\/\\/web\\.microsoftstream\\.com\\/video\\/([a-zA-Z\\d-]*)\\/?/;\n\tconst matches = regex.exec(urlString);\n\n\tif (matches && matches.length > 1) {\n\t\treturn matches[1];\n\t}\n\n\treturn undefined;\n}\n","/**\n * Get the tiktok id.\n * @param {string} urlString - the url from which you want to extract the id\n * @returns {string|undefined}\n */\nexport default function tiktok(urlString) {\n\t// Parse basic url and embeds\n\tconst basicReg = /tiktok\\.com(.*)\\/video\\/(\\d+)/gm;\n\tconst basicParsed = basicReg.exec(urlString);\n\tif (basicParsed && basicParsed.length > 2) {\n\t\treturn basicParsed[2];\n\t}\n\n\treturn undefined;\n}\n","/**\n * Get the dailymotion id.\n * @param {string} urlString - the url from which you want to extract the id\n * @returns {string|undefined}\n */\nexport default function dailymotion(urlString) {\n\t// Parse basic url and embeds\n\tconst basicReg = /dailymotion\\.com(.*)(video)\\/([a-zA-Z\\d]+)/gm;\n\tconst basicParsed = basicReg.exec(urlString);\n\tif (basicParsed) {\n\t\treturn basicParsed[3];\n\t}\n\n\t// Parse shortlink\n\tconst shortRegex = /dai\\.ly\\/([a-zA-Z\\d]+)/gm;\n\tconst shortParsed = shortRegex.exec(urlString);\n\tif (shortParsed && shortParsed.length > 1) {\n\t\treturn shortParsed[1];\n\t}\n\n\t// Dynamic link\n\tconst dynamicRegex = /dailymotion\\.com(.*)video=([a-zA-Z\\d]+)/gm;\n\tconst dynamicParsed = dynamicRegex.exec(urlString);\n\tif (dynamicParsed && dynamicParsed.length > 2) {\n\t\treturn dynamicParsed[2];\n\t}\n\n\treturn undefined;\n}\n","\n/**\n * Get the value assigned to a \"src\" attribute in a string, or undefined.\n * @param {String} input\n * @returns {String|undefined}\n */\nexport default function getSrc(input) {\n\tif (typeof input !== 'string') {\n\t\tthrow new TypeError('getSrc expected a string');\n\t}\n\n\tconst srcRegEx = /src=\"(.*?)\"/gm;\n\tconst matches = srcRegEx.exec(input);\n\n\tif (matches && matches.length >= 2) {\n\t\treturn matches[1];\n\t}\n\n\treturn undefined;\n}\n","import getSrc from './get-src.js';\n\n/**\n * Prepare the URL by doing common cleanup operations common for all URL types.\n * @param {String} input\n * @returns {String}\n */\nexport default function sanitizeUrl(input) {\n\tif (typeof input !== 'string') {\n\t\tthrow new TypeError(`sanitizeUrl expected a string, got ${typeof input}`);\n\t}\n\n\tlet string_ = input;\n\n\tif (/<iframe/gi.test(string_)) {\n\t\tstring_ = getSrc(string_) || '';\n\t}\n\n\t// Remove surrounding whitespaces or linefeeds\n\tstring_ = string_.trim();\n\n\t// Remove any leading `www.`\n\tstring_ = string_.replace('/www.', '/');\n\n\treturn string_;\n}\n","/**\n * Extract the url query parameter from a Google redirect url.\n *\n * @example\n * ```javascript\n * const url = extractGoogleRedirectionUrl('https://www.google.cz/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0ahUKEwj30L2MvpDVAhUFZVAKHb8CBaYQuAIIIjAA&url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DdQw4w9WgXcQ')\n * // => 'https://www.youtube.com/watch?v=dQw4w9WgXcQ'\n * ```\n * @param {String} input\n * @returns {String}\n */\nexport default function extractGoogleRedirectionUrl(input) {\n\tif (typeof input !== 'string') {\n\t\tthrow new TypeError(`extractGoogleRedirectionUrl expected a string, got ${typeof input}`);\n\t}\n\n\tconst string_ = input.trim();\n\n\t// Try to handle google redirection uri\n\tif (/\\/\\/google|www\\.google/.test(string_)) {\n\t\ttry {\n\t\t\tconst urlObject = new URL(input);\n\n\t\t\tconst parameters = new URLSearchParams(urlObject.search);\n\t\t\tconst extractedUrl = parameters.get('url');\n\n\t\t\tif (extractedUrl) {\n\t\t\t\treturn decodeURIComponent(extractedUrl);\n\t\t\t}\n\t\t} catch {\n\t\t\t// If there's an error (e.g., input is not a valid URL), return the trimmed input\n\t\t\treturn string_;\n\t\t}\n\t}\n\n\treturn string_;\n}\n\n","import youtube from './youtube.js';\nimport vimeo from './vimeo.js';\nimport vine from './vine.js';\nimport videopress from './videopress.js';\nimport microsoftStream from './microsoftstream.js';\nimport tiktok from './tiktok.js';\nimport dailymotion from './dailymotion.js';\nimport sanitizeUrl from './utils/sanitize-url.js';\nimport extractGoogleRedirectionUrl from './utils/extract-google-redirection-url.js';\n\n/**\n * Get the id and service from a video url.\n * @param {String} urlString - the url from which you want to extract the id\n * @returns {Object}\n */\nfunction getVideoId(urlString) {\n\tif (typeof urlString !== 'string') {\n\t\tthrow new TypeError('get-video-id expects a string');\n\t}\n\n\tconst string_ = sanitizeUrl(urlString);\n\tconst url = extractGoogleRedirectionUrl(string_);\n\n\tlet metadata = {\n\t\tid: null,\n\t\tservice: null,\n\t};\n\n\tif (/youtube|youtu\\.be|y2u\\.be|i.ytimg\\./.test(url)) {\n\t\tmetadata = {\n\t\t\tid: youtube(url),\n\t\t\tservice: 'youtube',\n\t\t};\n\t} else if (/vimeo/.test(url)) {\n\t\tmetadata = {\n\t\t\tid: vimeo(url),\n\t\t\tservice: 'vimeo',\n\t\t};\n\t} else if (/vine/.test(url)) {\n\t\tmetadata = {\n\t\t\tid: vine(url),\n\t\t\tservice: 'vine',\n\t\t};\n\t} else if (/videopress/.test(url)) {\n\t\tmetadata = {\n\t\t\tid: videopress(url),\n\t\t\tservice: 'videopress',\n\t\t};\n\t} else if (/microsoftstream/.test(url)) {\n\t\tmetadata = {\n\t\t\tid: microsoftStream(url),\n\t\t\tservice: 'microsoftstream',\n\t\t};\n\t} else if (/tiktok\\.com/.test(url)) {\n\t\tmetadata = {\n\t\t\tid: tiktok(url),\n\t\t\tservice: 'tiktok',\n\t\t};\n\t} else if (/(dailymotion\\.com|dai\\.ly)/.test(url)) {\n\t\tmetadata = {\n\t\t\tid: dailymotion(url),\n\t\t\tservice: 'dailymotion',\n\t\t};\n\t}\n\n\treturn metadata;\n}\n\nexport default getVideoId;\n"],"names":["stripParameters","shortcodeString","includes","split","youtube","youtubeString","string_","replace","shortcode","test","shortcodeid","shortsUrl","parameterv","array","inlinev","inlineid","parameterwebp","webp","eformat","estring","embedreg","embedid","usernamereg","undefined","userreg","elements","pop","attrreg","match","livereg","liveid","vimeo","vimeoString","id","event","eventMatches","exec","primary","matches","vimeoPipe","join","vimeoRegex","RegExp","length","vine","regex","videopress","urlString","idRegex","microsoftStream","tiktok","basicReg","basicParsed","dailymotion","shortRegex","shortParsed","dynamicRegex","dynamicParsed","getSrc","input","TypeError","srcRegEx","sanitizeUrl","trim","extractGoogleRedirectionUrl","urlObject","URL","parameters","URLSearchParams","search","extractedUrl","get","decodeURIComponent","getVideoId","url","metadata","service"],"mappings":"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"}